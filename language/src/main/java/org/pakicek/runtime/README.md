# Среда исполнения
Здесь находится реализация среды исполнения для байт-кода языка Slowrace, включающая в себя виртуальную машину, Garbage Collector, JIT-компилятор и структуру байт-кода.

## Компоненты

### Виртуальная машина
Стековая виртуальная машина, которая исполняет инструкции байт-кода.
- Управляет стеком операндов (`Stack<SrValue>`) и стеком вызовов (`Stack<CallFrame>`).
- Реализует цикл выборки и исполнения инструкций.
- Поддерживает арифметику произвольной точности (`BigInt`) и числа с плавающей точкой.
- Интегрируется с GC для выделения памяти и с JIT для оптимизации.

### Байт-код (`bytecode/`)
Определяет набор инструкций (`OpCode`) и структуру исполняемых блоков (`Chunk`).
- Подробнее: [bytecode/README.md](bytecode/README.md)

### Объекты виртуальной машины (`vm/`)
Реализует систему типов данных (`SrValue`, `SrArray`, `SrStruct`).
- Подробнее: [vm/README.md](vm/README.md)

### Сборщик мусора (`gc/`)
Автоматическое управление памятью с использованием алгоритма Mark-and-Sweep.
- Подробнее: [gc/README.md](gc/README.md)

### JIT-компилятор (`jit/`)
Оптимизатор байт-кода, применяющий техники свертки констант и удаления мертвого кода для часто вызываемых функций.
- Подробнее: [jit/README.md](jit/README.md)

## Архитектура исполнения
- Загрузка программы (`ProgramImage`) с точкой входа (`main`) и функциями.
- Инициализация стека и кучи.
- Запуск цикла исполнения:
  - Чтение инструкции.
  - Выполнение операции (стековой, арифметической, управления потоком).
  - При необходимости (нехватка памяти) — запуск GC.
  - При частом вызове функции — запуск JIT.