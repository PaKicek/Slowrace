# Garbage Collector
Здесь находится сборщик мусора, отвечающий за автоматическое управление памятью в виртуальной машине.

## Алгоритм
Используется классический алгоритм **Mark-and-Sweep**.
- **Mark**: Начиная с "корней" (локальные переменные всех фреймов стека и стек операндов), GC обходит граф объектов и помечает все достижимые объекты флагом `isMarked`.
- **Sweep**: GC проходит по списку всех выделенных объектов в куче (`Heap`). Объекты, не имеющие метки `isMarked`, удаляются из памяти. Метки у выживших объектов сбрасываются.

## Компоненты

### Heap
Менеджер кучи. Хранит список всех аллоцированных объектов (`SrObject`).
- `register(SrObject obj)`: Регистрирует новый объект.
- `shouldCollect()`: Определяет, пора ли запускать сборку мусора (на основе порога аллокаций `GC_THRESHOLD`).
- `sweep()`: Удаляет непомеченные объекты.

### GarbageCollector
Реализация логики сборки мусора.
- `collect()`: Запускает процесс сборки (Mark-and-Sweep).
- `mark()`: Обходит граф объектов, начиная с корней, полученных от VM (`vm.getStackRoots()`).

### Интеграция
GC тесно связан с пакетом `runtime` (`SrObject`, `SrArray`, `SrStruct`), так как каждый объект в памяти должен поддерживать маркировку.